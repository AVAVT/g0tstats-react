(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(87)},51:function(e,t,a){},8:function(e){e.exports={OGS_API_ROOT:"https://online-go.com/api/v1/players/",OGS_ROOT:"http://online-go.com/"}},85:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),c=(a(50),a(51),a(9)),l=a(1),i=a(2),m=a(4),p=a(3),u=a(5),h=a(38),f=function(e){try{var t=e.ratings.overall.rating;return Math.floor(Math.log(t/850)/.032)}catch(a){return e.ranking}},d=function(e){return(t=f(e))<30?30-t+"k":t-29+"d";var t},g=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.player.username?"statistics for player ".concat(this.props.player.username," (").concat(d(this.props.player),")"):"statistics",t="".concat(this.props.player.username&&"".concat(this.props.player.username," statistics | "),"Got Stats?");return r.a.createElement("nav",{className:"navbar navbar-dark Header"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,t)),r.a.createElement("a",{href:"".concat("/g0tstats-react","/"),className:"navbar-brand"},r.a.createElement("img",{className:"OGS_logo d-inline-block align-top",src:"https://cdn.online-go.com/assets/ogs_dark.svg",alt:"OGS logo"}),r.a.createElement("h1",{className:"page_title"},e)))}}]),t}(n.Component),E=Object(c.b)(function(e){return{player:e.player}})(g),O=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome!"),r.a.createElement("p",{className:"instruction"},"Start by entering username into the search field to the right (case-sensitive)."),r.a.createElement("p",null,"You can also use userID: my profile page is ",r.a.createElement("em",null,"https://online-go.com/user/view/197819"),", meaning my user ID is 197819."))},b=a(17),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:""},a.updateSearchUser=function(e){a.setState({username:e.target.value})},a.submit=function(e){e.preventDefault(),a.state.username&&(a.props.history.push("/user/".concat(a.state.username)),a.setState({username:""}),document.activeElement&&document.activeElement.blur())},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{value:this.state.username,onChange:this.updateSearchUser,name:"id",type:"text",placeholder:"Username or ID",className:"form-control"}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Got Stats?"))),r.a.createElement("small",{className:"tip help-block"},r.a.createElement("em",null,"*Tip: mouse over/tap on a chart to see more info.")))}}]),t}(n.Component),v=Object(b.d)(y),k=a(40),D=a.n(k),_=[["total_games_stats","Total games played on OGS"],["game_results","Game results distribution"],["ranked_games_stats","Ranked games"],["unranked_games_stats","Unranked games"],["even_games_stats","Even games"],["tournament_games_stats","Performance in tournaments"],["board_sizes_stats","Performance across board sizes"],["time_settings_stats","Performance across time settings"],["opponents_stats","Opponents statistics"],["misc_stats","Miscellaneous statistics"]],w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).onLinkClicked=function(e,t){e.preventDefault(),a.props.scrollToElem(t)},a.renderLink=function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:"#".concat(e[0]),onClick:function(t){return a.onLinkClicked(t,e[0])}},e[1]))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{className:"navi_list",items:_.map(function(e){return e[0]}),currentClassName:"active"},_.map(this.renderLink))}}]),t}(n.Component),S=a(41),C=a.n(S),N=(a(83),new Date(-864e13)),G=new Date(864e13),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:N,to:G},t=e.from,a=void 0===t?N:t,n=e.to,r=void 0===n?G:n;return function(e,t){e(P(t().games.results.filter(function(e){var t=new Date(e.ended);return t>=a&&t<=r})))}},P=function(e){return{type:"UPDATE_CHART_DATA_SOURCE",payload:e}},x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={date:a.props.minDate},a.onDateChanged=function(e){var t=e[0];a.setState({date:t})},a.filterGames=function(e){e.preventDefault(),a.props.changeStartDate(a.state.date)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.filterGames},r.a.createElement("p",null,"Analyze games starting from"),r.a.createElement("div",{className:"input-group"},r.a.createElement(C.a,{value:this.state.date||"",className:"form-control flatpickr-input",name:"date",onChange:this.onDateChanged,options:{dateFormat:"d M, Y",minDate:this.props.minDate,maxDate:this.props.maxDate,enableTime:!1,enableSeconds:!1}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:"input-group-btn btn btn-primary"},r.a.createElement("i",{className:"fa fa-search"})))))}}]),t}(n.Component),j=new Date(-864e13),L=Object(c.b)(function(e){var t=e.games;return{minDate:t.start||j,maxDate:t.end||new Date}},function(e){return{changeStartDate:function(t){return e(T({from:t}))}}})(x),A=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.showQuickLinks?r.a.createElement("div",{className:"navi hidden-sm hidden-xs"},r.a.createElement("hr",null),r.a.createElement(w,{scrollToElem:this.props.scrollToElem})):null,t=this.props.showDatePicker?r.a.createElement("div",{className:"hidden-sm hidden-xs"},r.a.createElement("hr",null),r.a.createElement(L,null)):null;return r.a.createElement("div",{className:"col-lg-3 col-md-4 order-md-2 sidebar"},r.a.createElement("nav",{className:"side_nav sticky-top"},r.a.createElement(v,null),e,t))}}]),t}(n.Component),R=Object(c.b)(function(e){var t=e.chartsData,a=e.games;return{showQuickLinks:t.length>0,showDatePicker:a.results.length>0}})(A),M=a(18),z=a.n(M),W=a(19),F=a.n(W),I=a(27),Y=a(8),H=a(28),U=a.n(H),B=function(e){return new U.a(function(t,a){isNaN(e)?z.a.get("".concat(Y.OGS_API_ROOT,"?username=").concat(e)).done(function(e){e.results.length>0?t(e.results[0].id):a("Error: user not found. Are you sure you entered the correct username? If it still doesn't work, try using userID instead.")}).fail(function(e){a("Error connecting to OGS server. Error code: ".concat(e.status,". Please try again later or contact me if you really have the need to stalk that person."))}):t(e)})},V=function(e){return new U.a(function(t,a){z.a.get("".concat(Y.OGS_API_ROOT).concat(e)).done(function(e){t(e)}).fail(function(e){a("Error connecting to OGS server. Error code: ".concat(e.status,". Please try again later or contact me if you really have the need to stalk that person."))})})},Q=function(e,t){return void 0===t&&(t="".concat(Y.OGS_API_ROOT).concat(e,"/games/?ended__isnull=false&annulled=false&ordering=-ended&page_size=50")),new U.a(function(e,a){z.a.get(t).done(function(t){e(t)}).fail(function(e){a(e)})})},J=a(33),$=new Date(-864e13),q=new Date(864e13),K=function(e){return function(){var t=Object(I.a)(F.a.mark(function t(a,n){var r,s,o,c,l,i,m,p;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=n().games.fetching)&&r.cancel(),t.prev=2,s=[],o=Q(e),a(X(o)),t.next=8,o;case 8:c=t.sent,s.push.apply(s,Object(J.a)(c.results)),l=0,i=Math.ceil(c.count/50);case 12:if(!c.next){t.next=22;break}return l++,m=Q(e,c.next),a(Z({promise:m,fetchingPage:l,fetchingTotalPage:i})),t.next=18,m;case 18:c=t.sent,s.push.apply(s,Object(J.a)(c.results)),t.next=12;break;case 22:(p=s.length?new Date(s[s.length-1].ended):$).setHours(0,0,0,0),a(ee({results:s,start:p,end:s.length?new Date(s[0].ended):q})),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(2),console.error(t.t0),"string"===typeof t.t0?a(te(t.t0)):a(te("An error has occured while fetching user games. Please try again later."));case 31:a(T());case 32:case"end":return t.stop()}},t,null,[[2,27]])}));return function(e,a){return t.apply(this,arguments)}}()},X=function(e){return{type:"FETCH_GAMES_START",payload:e}},Z=function(e){return{type:"FETCH_GAMES_PROGRESS",payload:{fetching:e.promise,fetchingPage:e.fetchingPage,fetchingTotalPage:e.fetchingTotalPage}}},ee=function(e){return{type:"FETCH_GAMES_SUCCESS",payload:e}},te=function(e){return{type:"FETCH_GAMES_FAILURE",payload:{error:e}}},ae=function(e){return{type:"FETCH_PLAYER_START",payload:e}},ne=function(e){return{type:"FETCH_PLAYER_SUCCESS",payload:e}},re=function(e){return{type:"FETCH_PLAYER_FAILURE",payload:{error:e}}},se=(a(85),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isFetchingPlayer,a=e.errorMessage,n=e.currentPage,s=e.totalPages,o=s?" of ".concat(s):"",c=t?"Fetching user info from OGS":"Fetching games result from OGS: page ".concat(n).concat(o);return r.a.createElement("div",{className:"loading_wrapper"},r.a.createElement("svg",{className:"loading_icon animating",width:"150",height:"150"},r.a.createElement("circle",{className:"black_stone3",cx:"71.5",cy:"28.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone2",cx:"28.5",cy:"71.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone1",cx:"114.5",cy:"71.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone4",cx:"71.5",cy:"114.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"white_stone",cx:"71.5",cy:"71.5",r:"20",strokeWidth:"0",fill:"#f8f8ff"})),r.a.createElement("p",{className:"loading_text"},a||c))}}]),t}(n.Component)),oe=Object(c.b)(function(e){var t=e.player,a=e.games;return{isFetchingPlayer:t.fetching,currentPage:a.fetchingPage,totalPages:a.fetchingTotalPage,errorMessage:t.fetchError||a.fetchError}})(se),ce=a(10);function le(e,t){return e.players.black.id===t?{player:e.players.black,opponent:e.players.white}:{player:e.players.white,opponent:e.players.black}}function ie(e,t){return e.players.black.id===t&&e.white_lost||e.players.white.id===t&&e.black_lost}function me(e,t){var a=ie(t,e.id);if("Resignation"===t.outcome)e["".concat(a?"Plr":"Opp","+Res")]++;else if("Timeout"===t.outcome)e["".concat(a?"Plr":"Opp","+Time")]++;else if(isNaN(t.outcome.split(" ")[0]))e["".concat(a?"Plr":"Opp","+Other")]++;else{var n=parseFloat(t.outcome.split(" ")[0],10),r=Math.floor(n/10),s=10*(r<4?r:4)+"+";s="".concat(a?"Plr":"Opp","+").concat(s),e["".concat(a?"Plr":"Opp","+Count")]++,e[s]++}return e}function pe(e,t){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=(a.getTime()-n.getTime())/864e5;return a>n?Math.floor(r):Math.ceil(r)}var ue={computeWinLoseStatistics:function(e,t){var a=0,n=0,r=0,s=0;return e.forEach(function(e){e.players.black.id===t?(a++,e.black_lost&&r++):(n++,e.white_lost&&s++)}),{blackGames:a,blackLosses:r,whiteGames:n,whiteLosses:s}},computeWinLoseDistributions:function(e,t){var a={id:t,"Opp+Other":0,"Opp+Count":0,"Opp+Time":0,"Opp+Res":0,"Opp+40+":0,"Opp+30+":0,"Opp+20+":0,"Opp+10+":0,"Opp+0+":0,"Plr+0+":0,"Plr+10+":0,"Plr+20+":0,"Plr+30+":0,"Plr+40+":0,"Plr+Res":0,"Plr+Time":0,"Plr+Count":0,"Plr+Other":0};return e.reduce(me,a)},computeBoardSizes:function(e,t){var a=0,n=0,r=0,s=0,o=0,c=0,l=0,i=0;return e.forEach(function(e){19===e.width&&19===e.height?(a++,ie(e,t)||o++):13===e.width&&13===e.height?(n++,ie(e,t)||c++):9===e.width&&9===e.height?(r++,ie(e,t)||l++):(s++,ie(e,t)||i++)}),{nineteenGames:a,thirteenGames:n,nineGames:r,otherGames:s,nineteenLosses:o,thirteenLosses:c,nineLosses:l,otherLosses:i}},computeTimeSettings:function(e,t){var a=0,n=0,r=0,s=0,o=0,c=0;return e.forEach(function(e){e.time_per_move<20?(a++,ie(e,t)||s++):e.time_per_move>10800?(r++,ie(e,t)||c++):(n++,ie(e,t)||o++)}),{blitzGames:a,liveGames:n,correspondenceGames:r,blitzLosses:s,liveLosses:o,correspondenceLosses:c}},computeOpponentsInfo:function(e,t){var a=[],n=0,r={rank:70},s={rank:0},o={games:0},c={rank:0};for(var l in e.forEach(function(e){var n=le(e,t).opponent,l=f(n);ie(e,t)&&l>c.rank&&(c=Object(ce.a)({},n,{url:e.related.detail.split("games/")[1],date:e.ended,rank:l})),a[n.id]?a[n.id]++:a[n.id]=1,a[n.id]>o.games&&(o=Object(ce.a)({},n,{games:a[n.id]})),l>s.rank&&(s=Object(ce.a)({},n,{rank:l})),l<r.rank&&(r=Object(ce.a)({},n,{rank:l}))}),n=0,a)a.hasOwnProperty(l)&&n++;return{strongestOpp:s,weakestOpp:r,mostPlayed:o,strongestDefeated:c,numberOfOpponents:n,averageGamePerOpponent:(e.length/n).toFixed(2)}},computeMiscInfo:function(e,t,a){var n,r=new Date;r.setHours(0,0,0,0);var s={streak:0},o={streak:0},c=0,l=0,i={diff:0},m=!0,p=!1,u=void 0;try{for(var h,f=t[Symbol.iterator]();!(m=(h=f.next()).done);m=!0){var d=h.value;if(ie(d,a.id)?(o.streak++,o.start=d,o.end||(o.end=d),o.streak>s.streak&&(s=o)):o={streak:0},ie(d,a.id)){var g=le(d,a.id).opponent;if(!isNaN(d.outcome.split(" ")[0])){var E=parseFloat(d.outcome.split(" ")[0]);E>i.diff&&(i={game:d,opponent:g,diff:E})}}var O=new Date(d.ended);O.setHours(0,0,0,0),0!==pe(r,O)?(r=O,l=1):l++,l>c&&(n=r,c=l)}}catch(_){p=!0,u=_}finally{try{m||null==f.return||f.return()}finally{if(p)throw u}}var b=new Date(a.registrationDate);if(e.length){var y=new Date(e[e.length-1].started);y<b&&(b=y)}var v=0;if(t.length){var k=new Date(t[t.length-1].started),D=pe(new Date,k);v=t.length/parseFloat(D)}return{memberSince:b,gamesPerDay:v,longestStreak:s,mostActiveDay:n,gamesOnMostActiveDay:c,biggestWin:i}},isPlayerWin:ie},he=a(7),fe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:30},colors:["#000000","#f8f8ff"],pieSliceTextStyle:{color:"#d93344"},legend:{position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},animation:{startup:!0,easing:"inout",duration:500}},subChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},animation:{startup:!0,easing:"inout",duration:500}}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=ue.computeWinLoseStatistics(this.props.gamesData.games,this.props.gamesData.playerId),t=[["Color","Games"],["Black",e.blackGames],["White",e.whiteGames]],a=[["Result","Games"],["Losses",e.blackLosses+e.whiteLosses],["Wins",e.blackGames+e.whiteGames-(e.blackLosses+e.whiteLosses)]],n=e.blackGames>0?[["Result","Games"],["Losses",e.blackLosses],["Wins",e.blackGames-e.blackLosses]]:null,s=e.whiteGames>0?[["Result","Games"],["Losses",e.whiteLosses],["Wins",e.whiteGames-e.whiteLosses]]:null;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},t?r.a.createElement("div",{className:"col-sm-6 mr-auto ml-auto"},r.a.createElement(he.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:t,width:"100%",height:"300px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},a?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Total"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.subChartOptions,data:a,width:"100%",height:"250px"})):null,n?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"As Black"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.subChartOptions,data:n,width:"100%",height:"250px"})):null,s?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"As White"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.subChartOptions,data:s,width:"100%",height:"250px"})):null),this.props.footer)}}]),t}(n.Component),de=Object(c.b)(function(e){var t=e.player,a=e.chartsData;return{playerId:t.id,games:a}})(fe),ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},columnChartOptions:{backgroundColor:"transparent",isStacked:!0,chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},hAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}},vAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}}}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"generateChartData",value:function(e){var t=ue.computeWinLoseDistributions(e.games,e.playerId);return{chartData1:[["Result","Games"],["Resign",t["Plr+Res"]],["Timeout",t["Plr+Time"]],["Scoring",t["Plr+Count"]],["Other",t["Plr+Other"]]],chartData2:[["Result","Games"],["Resign",t["Opp+Res"]],["Timeout",t["Opp+Time"]],["Scoring",t["Opp+Count"]],["Other",t["Opp+Other"]]],chartData3:[["Outcome","Games opponent wins","Games ".concat(this.props.player.username," wins")],["40+",t["Opp+40+"],null],["30+",t["Opp+30+"],null],["20+",t["Opp+20+"],null],["10+",t["Opp+10+"],null],["0+",t["Opp+0+"],null],["0+",null,t["Plr+0+"]],["10+",null,t["Plr+10+"]],["20+",null,t["Plr+20+"]],["30+",null,t["Plr+30+"]],["40+",null,t["Plr+40+"]]]}}},{key:"render",value:function(){var e=this.generateChartData(this.props.gamesData),t=e.chartData1,a=e.chartData2,n=e.chartData3;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},a?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Losses"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:a,width:"100%",height:"300px"})):null,t?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Wins"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:t,width:"100%",height:"300px"})):null),r.a.createElement("div",{className:"row"},n?r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"Final scoring distribution"),r.a.createElement(he.a,{chartType:"ColumnChart",options:this.state.columnChartOptions,data:n,width:"100%",height:"300px"})):null))}}]),t}(n.Component),Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:30},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"generateChartData",value:function(e){var t=ue.computeBoardSizes(e.games,e.playerId);return{chartData1:[["Size","Games"],["19x19",t.nineteenGames],["13x13",t.thirteenGames],["9x9",t.nineGames],["Other",t.otherGames]],chartData2:t.nineteenGames>0?[["Result","Games"],["Losses",t.nineteenLosses],["Wins",t.nineteenGames-t.nineteenLosses]]:null,chartData3:t.thirteenGames>0?[["Result","Games"],["Losses",t.thirteenLosses],["Wins",t.thirteenGames-t.thirteenLosses]]:null,chartData4:t.nineGames>0?[["Result","Games"],["Losses",t.nineLosses],["Wins",t.nineGames-t.nineLosses]]:null,chartData5:t.otherGames>0?[["Result","Games"],["Losses",t.otherLosses],["Wins",t.otherGames-t.otherLosses]]:null}}},{key:"render",value:function(){var e=this.generateChartData(this.props.gamesData),t=e.chartData1,a=e.chartData2,n=e.chartData3,s=e.chartData4,o=e.chartData5;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},t?r.a.createElement("div",{className:"col-md-6 mr-auto ml-auto"},r.a.createElement(he.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:t,width:"100%",height:"300px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},a?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"19x19"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:a,width:"100%",height:"250px"})):null,n?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"13x13"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:n,width:"100%",height:"250px"})):null,s?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"9x9"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:s,width:"100%",height:"250px"})):null,o?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Other Sizes"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:o,width:"100%",height:"250px"})):null))}}]),t}(n.Component),Oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:30},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"generateChartData",value:function(e){var t=ue.computeTimeSettings(e.games,e.playerId);return{chartData1:[["Size","Games"],["Blitz",t.blitzGames],["Live",t.liveGames],["Correspondence",t.correspondenceGames]],chartData2:t.blitzGames>0?[["Result","Games"],["Losses",t.blitzLosses],["Wins",t.blitzGames-t.blitzLosses]]:null,chartData3:t.liveGames>0?[["Result","Games"],["Losses",t.liveLosses],["Wins",t.liveGames-t.liveLosses]]:null,chartData4:t.correspondenceGames>0?[["Result","Games"],["Losses",t.correspondenceLosses],["Wins",t.correspondenceGames-t.correspondenceLosses]]:null}}},{key:"render",value:function(){var e=this.generateChartData(this.props.gamesData),t=e.chartData1,a=e.chartData2,n=e.chartData3,s=e.chartData4;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},t?r.a.createElement("div",{className:"col-sm-6 mr-auto ml-auto"},r.a.createElement(he.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:t,width:"100%",height:"300px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},a?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Blitz"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:a,width:"100%",height:"250px"})):null,n?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Live"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:n,width:"100%",height:"250px"})):null,s?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Correspondence"),r.a.createElement(he.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:s,width:"100%",height:"250px"})):null))}}]),t}(n.Component),be=a(20),ye=a.n(be),ve=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"generateChartData",value:function(e){var t=ue.computeOpponentsInfo(e.games,e.playerId),a=t.weakestOpp.rank-5,n=t.strongestOpp.rank-5,r=this.props.player.rank-5;return{numberOfOpponents:t.numberOfOpponents,weakestLegendStyle:{marginLeft:"".concat(3.03030303*a,"%")},strongestLegendStyle:{marginLeft:"".concat(3.03030303*(n-a),"%")},weakestDisp:{href:"".concat(Y.OGS_ROOT,"user/view/").concat(t.weakestOpp.id,"/").concat(t.weakestOpp.username),title:"".concat(t.weakestOpp.username," (").concat(d(t.weakestOpp),")"),style:{left:"".concat(3.03030303*a,"%")},img:"".concat(Y.OGS_API_ROOT).concat(t.weakestOpp.id,"/icon?size=32")},userDisp:{href:"".concat(Y.OGS_ROOT,"user/view/").concat(this.props.player.id,"/").concat(this.props.player.username),title:"".concat(this.props.player.username," (").concat(d(this.props.player),")"),style:{left:"".concat(3.03030303*r,"%")},img:"".concat(Y.OGS_API_ROOT).concat(this.props.player.id,"/icon?size=32")},strongestDisp:{href:"".concat(Y.OGS_ROOT,"user/view/").concat(t.strongestOpp.id,"/").concat(t.strongestOpp.username),title:"".concat(t.strongestOpp.username," (").concat(d(t.strongestOpp),")"),style:{left:"".concat(3.03030303*n,"%")},img:"".concat(Y.OGS_API_ROOT).concat(t.strongestOpp.id,"/icon?size=32")},mostPlayedDisp:{href:"".concat(Y.OGS_ROOT,"user/view/").concat(t.mostPlayed.id,"/").concat(t.mostPlayed.username),img:"".concat(Y.OGS_API_ROOT).concat(t.mostPlayed.id,"/icon?size=32"),username:"".concat(t.mostPlayed.username," (").concat(d(t.mostPlayed),")"),games:t.mostPlayed.games},strongestDefeatedDisp:{href:"".concat(Y.OGS_ROOT,"user/view/").concat(t.strongestDefeated.id,"/").concat(t.strongestDefeated.username),img:"".concat(Y.OGS_API_ROOT).concat(t.strongestDefeated.id,"/icon?size=32"),username:"".concat(t.strongestDefeated.username," (").concat(d(t.strongestDefeated),")"),date:t.strongestDefeated.date,gameHref:"http://online-go.com/game/".concat(t.strongestDefeated.url)},averageGamePerOpponent:t.averageGamePerOpponent}}},{key:"render",value:function(){var e=this.generateChartData(this.props.gamesData),t=e.numberOfOpponents,a=e.weakestLegendStyle,n=e.strongestLegendStyle,s=e.weakestDisp,o=e.userDisp,c=e.strongestDisp,l=e.mostPlayedDisp,i=e.strongestDefeatedDisp,m=e.averageGamePerOpponent;return t?r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title,": ",t),r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"opponents_polars_chart",className:"opponent_chart col-8 mr-auto ml-auto"},r.a.createElement("ul",{className:"bar_legend"},r.a.createElement("li",{style:a},r.a.createElement("div",null,"Weakest Opponent"),r.a.createElement("span",null)),r.a.createElement("li",{style:n},r.a.createElement("div",null,"Strongest Opponent"),r.a.createElement("span",null))),r.a.createElement("div",{className:"bar_chart"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s.href,"data-toggle":"tooltip","data-placement":"top",title:s.title,style:s.style},r.a.createElement("img",{src:s.img,alt:s.title})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o.href,"data-toggle":"tooltip","data-placement":"top",title:o.title,style:o.style},r.a.createElement("img",{src:o.img,alt:o.title})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c.href,"data-toggle":"tooltip","data-placement":"top",title:c.title,style:c.style},r.a.createElement("img",{src:c.img,alt:c.title}))),r.a.createElement("ul",{className:"ruler"},r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"25k")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"10k")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"1d")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"9d"))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("ul",{className:"info_list"},r.a.createElement("li",null,"Most played with:"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l.href},r.a.createElement("img",{className:"img-20",src:l.img,alt:l.username})," ",l.username)," ","in ",l.games," games."),!!i.username&&r.a.createElement("li",null,"Scored a triumphant victory against"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer nofollow",href:i.href},r.a.createElement("img",{className:"img-20",src:i.img,alt:i.username})," ",i.username)," ","on ",r.a.createElement("a",{href:i.gameHref,target:"_blank",rel:"noopener noreferrer nofollow"},ye()(i.date).format("MMM DD, YYYY")),"."),r.a.createElement("li",null,"Average game per opponent: ",m," games."))))):r.a.createElement("section",{className:"stats_block"})}}]),t}(n.Component),ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={columnChartOptions:{backgroundColor:"transparent",isStacked:!0,chartArea:{top:10},colors:["#d93344","#41CD64","#5486d1","#9d4dc5"],legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},hAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}},vAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}}}},a.createLinkToGame=function(e){return r.a.createElement("a",{href:"".concat(Y.OGS_ROOT,"game/").concat(e.related.detail.split("games/")[1]),target:"_blank",rel:"noopener noreferrer nofollow"},ye()(e.ended).format("DD MMM, YYYY"))},a.createLinkToPlayer=function(e){var t="".concat(Y.OGS_ROOT,"user/view/").concat(e.id,"/").concat(e.username),a="".concat(Y.OGS_API_ROOT).concat(e.id,"/icon?size=32"),n="".concat(e.username," (").concat(d(e),")");return r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer nofollow",href:t},r.a.createElement("img",{className:"img-20",src:a,alt:n})," ",n)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.allGames,a=e.gamesData,n=e.player,s=ue.computeMiscInfo(t,a.games,n),o=s.memberSince,c=s.gamesPerDay,l=s.longestStreak,i=s.mostActiveDay,m=s.gamesOnMostActiveDay,p=s.biggestWin,u=l.end?r.a.createElement("span",null,", from ",this.createLinkToGame(l.start)," to ",this.createLinkToGame(l.end)):"",h=p.game&&r.a.createElement("li",null,"Biggest win: ",p.diff," points victory against ",this.createLinkToPlayer(p.opponent)," on ",this.createLinkToGame(p.game),".");return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"info_list"},r.a.createElement("li",null,"Member since: ",ye()(o).format("DD MMM, YYYY"),"."),r.a.createElement("li",null,"Plays ",Math.round(100*c)/100," games per day on average."),r.a.createElement("li",null,"Longest win streak: ",l.streak," wins in a row",u,"."),h,r.a.createElement("li",null,"Most active day: ",ye()(i).format("DD MMM, YYYY")," with ",m," finished games."))))}}]),t}(n.Component),De=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"createGameData",value:function(e){return{playerId:this.props.player.id,games:e}}},{key:"render",value:function(){var e=this,t=this.createGameData(this.props.chartsData),a=t.games.reduce(function(t,a){return ue.isPlayerWin(a,e.props.player.id)?t:t+1},0),n=t.games.filter(function(e){return e.ranked}),s=t.games.filter(function(e){return!e.ranked}),o=t.games.filter(function(e){return 0===e.handicap}),c=t.games.filter(function(e){return null!==e.tournament}),l=c.reduce(function(e,t){return-1===e.indexOf(t.tournament)&&e.push(t.tournament),e},[]);return r.a.createElement("div",null,t.games.length>0&&r.a.createElement(de,{title:"Total games played on OGS: ".concat(t.games.length),id:"total_games_stats",gamesData:t,footer:a>=50?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("p",{className:"gratz"},"Congratulations, ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://senseis.xmp.net/?page=LoseYourFirst50GamesAsQuicklyAsPossible"},"you have lost your first 50 games"),"!"))):null}),t.games.length>0&&r.a.createElement(ge,{title:"Game results distribution",id:"game_results",gamesData:t,player:this.props.player}),n.length>0&&r.a.createElement(de,{title:"Ranked Games: ".concat(n.length),id:"ranked_games_stats",gamesData:this.createGameData(n)}),s.length>0&&r.a.createElement(de,{title:"Unranked Games: ".concat(s.length),id:"unranked_games_stats",gamesData:this.createGameData(s)}),o.length>0&&r.a.createElement(de,{title:"Even Games: ".concat(o.length),id:"even_games_stats",gamesData:this.createGameData(o)}),c.length>0&&r.a.createElement(de,{title:"Participated in ".concat(l.length," tournaments"),id:"tournament_games_stats",gamesData:this.createGameData(c)}),t.games.length>0&&r.a.createElement(Ee,{title:"Performance across board sizes",id:"board_sizes_stats",gamesData:t}),t.games.length>0&&r.a.createElement(Oe,{title:"Performance across time settings",id:"time_settings_stats",gamesData:t}),t.games.length>0&&r.a.createElement(ve,{title:"Number of opponents faced",id:"opponents_stats",gamesData:t,player:this.props.player}),t.games.length>0&&r.a.createElement(ke,{title:"Miscellaneous statistics",id:"misc_stats",allGames:this.props.games.results,gamesData:t,player:this.props.player}))}}]),t}(n.Component),_e=Object(c.b)(function(e){return{chartsData:e.chartsData,games:e.games,player:e.player}})(De),we=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("p",null,r.a.createElement("em",null,'"Got Stats?" analytics tool for ',r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer nofollow",href:"www.online-go.com"},"OGS")," by Chinitsu (aka AVAVT).")),r.a.createElement("p",null,r.a.createElement("em",null,"The source code is also available on ",r.a.createElement("a",{href:"https://github.com/AVAVT/g0tStats",target:"_blank",rel:"noopener noreferrer nofollow"},"Github"),"."))),r.a.createElement("div",{className:"col-sm-4 text-right"},r.a.createElement("a",{href:"http://avavt.github.io",target:"_blank",rel:"noopener noreferrer"},"About the author")))))},Se=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"scrollToElem",value:function(e){z()("html,body").animate({scrollTop:z()("#"+e).offset().top},"fast")}},{key:"componentDidMount",value:function(){this.props.user&&this.props.getPlayerData(this.props.user)}},{key:"componentWillReceiveProps",value:function(e){e.user!==this.props.user&&this.props.getPlayerData(e.user)}},{key:"render",value:function(){return r.a.createElement("main",{className:"App"},r.a.createElement(E,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(R,{scrollToElem:this.scrollToElem}),r.a.createElement("div",{className:"col-lg-9 order-md-1 col-md-8 content-wrapper"},this.props.showLoading?r.a.createElement(oe,null):this.props.showStatistics?r.a.createElement(_e,null):r.a.createElement(O,null)))),r.a.createElement(we,null))}}]),t}(n.Component),Ce=Object(c.b)(function(e){var t=e.player,a=e.games;return{showLoading:!!t.fetching||!!t.fetchError||!!a.fetching||!!a.fetchError,showStatistics:a.results.length>0}},function(e){return{getPlayerData:function(t){return e(function(e){return function(){var t=Object(I.a)(F.a.mark(function t(a,n){var r,s,o,c,l;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=n().player.fetching)&&r.cancel(),t.prev=2,s=B(e),a(ae(s)),t.next=7,s;case 7:return o=t.sent,c=V(o),a(ae(c)),t.next=12,c;case 12:l=t.sent,a(K(l.id)),a(ne({id:l.id,username:l.username,rank:parseInt(l.ranking),ratings:l.ratings,registrationDate:l.registration_date})),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),console.error(t.t0),"string"===typeof t.t0?a(re(t.t0)):a(re("An error has occured while fetching user info. Please try again later."));case 21:case"end":return t.stop()}},t,null,[[2,17]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))}}})(Se),Ne=a(30),Ge=function(e){var t=e.reduxStore;return r.a.createElement(c.a,{store:t},r.a.createElement(Ne.a,null,r.a.createElement(b.a,{path:"/user/:user",component:function(e){var t=e.match;return r.a.createElement(Ce,{user:t.params.user})}}),r.a.createElement(b.a,{exact:!0,path:"/",component:Ce})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Te=a(43),Pe=a(44),xe=a(16),je={id:-1,username:"",rank:0,fetching:null,fetchError:"",registrationDate:null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_PLAYER_START":return Object(ce.a)({},je,{fetching:n,fetchError:""});case"FETCH_PLAYER_SUCCESS":return Object(ce.a)({},e,{fetching:null},n);case"FETCH_PLAYER_FAILURE":return Object(ce.a)({},e,{fetching:null,fetchError:n.error});default:return e}},Ae=new Date(-864e13),Re=new Date(864e13),Me={results:[],fetching:!1,fetchingPage:0,fetchingTotalPage:0,fetchError:"",start:Ae,end:Re},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_PLAYER_START":return Object(ce.a)({},Me);case"FETCH_GAMES_START":return Object(ce.a)({},e,{fetching:n,fetchingPage:1,fetchingTotalPage:0,fetchError:"",start:Ae,end:Re});case"FETCH_GAMES_PROGRESS":return Object(ce.a)({},e,n);case"FETCH_GAMES_SUCCESS":return Object(ce.a)({},e,{fetching:null},n);case"FETCH_GAMES_FAILURE":return Object(ce.a)({},e,{fetching:null,fetchError:n.error});default:return e}},We=[],Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"UPDATE_CHART_DATA_SOURCE":return n;case"FETCH_GAMES_START":case"FETCH_PLAYER_START":return[].concat(We);default:return e}},Ie=Object(xe.combineReducers)({player:Le,games:ze,chartsData:Fe}),Ye=Object(xe.createStore)(Ie,Object(Te.composeWithDevTools)(Object(xe.applyMiddleware)(Pe.a)));o.a.render(r.a.createElement(Ge,{reduxStore:Ye}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[45,1,2]]]);
//# sourceMappingURL=main.781b26ed.chunk.js.map