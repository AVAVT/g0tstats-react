(this.webpackJsonpgotstats=this.webpackJsonpgotstats||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"OGS_API_ROOT":"https://online-go.com/api/v1/players/","OGS_ROOT":"http://online-go.com/"}')},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),o=a.n(s),l=(a(72),a(73),a(13)),c=a(4),i=a(5),m=a(7),u=a(6),p=a(59),h=function(e){return e<30?30-e+"k":e-29+"d"},d=function(e){try{var t=e.ratings.overall.rating;return Math.floor(Math.log(t/850)/.032)}catch(a){return e.ranking}},f=function(e){return e.ratings.overall.rating},g=function(e){return h(d(e))},E=function(e){var t=Math.floor(Math.log(e/850)/.032);return h(t)},v=function(e,t){return e.players.black.id===t&&e.white_lost||e.players.white.id===t&&e.black_lost},y=function(e,t){return e.players.black.id===t?{player:e.players.black,opponent:e.players.white}:{player:e.players.white,opponent:e.players.black}},b=function(e,t){return e.players.black.id===t?{historicalPlayer:e.historical_ratings.black,historicalOpponent:e.historical_ratings.white}:{historicalPlayer:e.historical_ratings.white,historicalOpponent:e.historical_ratings.black}},O=function(e,t){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=(a.getTime()-n.getTime())/864e5;return a>n?Math.floor(r):Math.ceil(r)},k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.player.username?"statistics for player ".concat(this.props.player.username," (").concat(g(this.props.player),")"):"statistics",t="".concat(this.props.player.username&&"".concat(this.props.player.username," statistics | "),"Got Stats?");return r.a.createElement("nav",{className:"navbar navbar-dark Header justify-content-start"},r.a.createElement(p.a,null,r.a.createElement("title",null,t)),r.a.createElement("a",{href:"".concat("/gotstats","/"),className:"navbar-brand"},r.a.createElement("img",{className:"OGS_logo d-inline-block align-top",src:"https://cdn.online-go.com/assets/ogs_dark.svg",alt:"OGS logo"})),r.a.createElement("h1",{className:"page_title"},e))}}]),a}(n.Component),D=Object(l.b)((function(e){return{player:e.player}}))(k),x=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome!"),r.a.createElement("p",{className:"instruction"},"Start by entering username into the search field to the right (case-sensitive)."),r.a.createElement("p",null,"You can also use userID: my profile page is"," ",r.a.createElement("em",null,"https://online-go.com/user/view/197819"),", meaning my user ID is 197819."),r.a.createElement("hr",null),r.a.createElement("p",null,"If you play a lot of games, be sure to Export after querying finished."),r.a.createElement("p",null,"It will save your games data into 1 file, which you can import later to save time."))},w=a(9),N=a(62),C=a(22),S=a.n(C),_=a(31),j=a(27),P=a(19),T=a(2),R=new Date("Jan 1 2008"),G=new Date,L={Ranked:"Ranked",Unranked:"Unranked",values:["Ranked","Unranked"]},A={Tournament:"Tournament",NonTournament:"Non-tournament",values:["Tournament","Non-tournament"]},z={Nineteens:"19x19",Thirteens:"13x13",Nines:"9x9",Others:"Others",values:["19x19","13x13","9x9","Others"]},M={Blitz:"Blitz",Live:"Live",Correspondence:"Correspondence",values:["Blitz","Live","Correspondence"]},I={Scoring:"Scoring",Resignation:"Resignation",Timeout:"Timeout",Others:"Others",values:["Scoring","Resignation","Timeout","Others"]},W={Black:"Play as Black",White:"Play as White",values:["Play as Black","Play as White"]},F={Even:"Even game",Taker:"Handicap taker",Giver:"Handicap giver",values:["Even game","Handicap taker","Handicap giver"]},B=function(e){return function(t,a){var n=a().player.id,r=a().games.end,s=a().chartsData,o=s.startDate,l=s.endDate,c=s.ranked,i=s.tournament,m=s.boardSize,u=s.timeSettings,p=s.resultType,h=s.handicap,d=s.color,f=s.limitEndDate,g=e&&e.hasOwnProperty("limitEndDate")?e.limitEndDate:f,E=e&&e.hasOwnProperty("endDate")?e.endDate:l,v=g?E<r?E:r:G,y=Object(T.a)(Object(T.a)({startDate:o,ranked:c,tournament:i,boardSize:m,timeSettings:u,handicap:h,color:d,playerId:n,limitEndDate:f,resultType:p},e),{},{endDate:v}),b=Y(y);t($(Object(T.a)(Object(T.a)({},y),{},{results:a().games.results.filter(b)})))}},Y=function(e){var t=e.startDate,a=e.endDate,n=e.ranked,r=e.tournament,s=e.boardSize,o=e.timeSettings,l=e.handicap,c=e.resultType,i=e.color,m=e.playerId;return function(e,u){var p=new Date(e.ended);return!(p<t||p>a)&&(H(e,n)&&U(e,r)&&J(e,s)&&V(e,o)&&q(e,l,m)&&Q(e,i,m)&&X(e,c))}},H=function(e,t){return!(e.ranked&&!t.includes(L.Ranked))&&!(!e.ranked&&!t.includes(L.Unranked))},U=function(e,t){var a=null!==e.tournament;return!(a&&!t.includes(A.Tournament))&&!(!a&&!t.includes(A.NonTournament))},J=function(e,t){var a=function(e){return 19===e.width&&19===e.height?"19x19":13===e.width&&13===e.height?"13x13":9===e.width&&9===e.height?"9x9":"Others"}(e);return t.includes(a)},V=function(e,t){var a=function(e){return e.time_per_move<20?"Blitz":e.time_per_move>10800?"Correspondence":"Live"}(e);return t.includes(a)},q=function(e,t,a){var n=function(e,t){return 0===e.handicap?"Even game":e.players.black.id===t?"Handicap taker":"Handicap giver"}(e,a);return t.includes(n)},Q=function(e,t,a){return!(e.players.black.id===a&&!t.includes(W.Black))&&!(e.players.white.id===a&&!t.includes(W.White))},X=function(e,t){if("Resignation"===e.outcome){if(t.includes(I.Resignation))return!0}else if("Timeout"===e.outcome){if(t.includes(I.Timeout))return!0}else if(isNaN(e.outcome.split(" ")[0])){if(t.includes(I.Others))return!0}else if(t.includes(I.Scoring))return!0;return!1},$=function(e){return{type:"UPDATE_CHART_DATA_SOURCE",payload:e}},K=function(e){return"".concat(e,"_PENDING")},Z=function(e){return"".concat(e,"_FULFILLED")},ee=function(e){return"".concat(e,"_REJECTED")},te=function(e){return"".concat(e,"_PROGRESS")},ae="FETCH_GAMES",ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){var a=Object(_.a)(S.a.mark((function a(n,r){var s,o,l,c,i,m,u,p,h,d,f,g,E;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=r(),(o=s.games.fetching)&&o.cancel(),l=t.length>0?t[0].id:null,c=s.OGSApi,a.prev=5,i=[],m=0,p=0,h=!0;case 10:return d=c.fetchGamePage(e,u?u.next:void 0),n(0===m?se(d):oe({promise:d,fetchingPage:m,fetchingTotalPage:p,results:i})),n(B()),a.next=15,d;case 15:u=a.sent,f=Object(P.a)(u.results),a.prev=17,f.s();case 19:if((g=f.n()).done){a.next=30;break}if((E=g.value).id===l){a.next=25;break}i.push(E),a.next=28;break;case 25:return h=!1,i=[].concat(Object(j.a)(i),Object(j.a)(t)),a.abrupt("break",30);case 28:a.next=19;break;case 30:a.next=35;break;case 32:a.prev=32,a.t0=a.catch(17),f.e(a.t0);case 35:return a.prev=35,f.f(),a.finish(35);case 38:m++,p=Math.ceil(u.count/50);case 40:if(u.next&&h){a.next=10;break}case 41:n(le(re(i))),a.next=48;break;case 44:a.prev=44,a.t1=a.catch(5),console.error(a.t1),"string"===typeof a.t1?n(ce(a.t1)):n(ce("An error has occured while fetching user games. Please try again later."));case 48:n(B());case 49:case"end":return a.stop()}}),a,null,[[5,44],[17,32,35,38]])})));return function(e,t){return a.apply(this,arguments)}}()},re=function(e){var t=e.length?new Date(e[e.length-1].ended):R;return t.setHours(0,0,0,0),{results:e,start:t,end:e.length?new Date(e[0].ended):G}},se=function(e){return{type:K(ae),payload:e}},oe=function(e){var t=e.promise,a=e.fetchingPage,n=e.fetchingTotalPage,r=e.results;return{type:te(ae),payload:{fetching:t,fetchingPage:a,fetchingTotalPage:n,results:r}}},le=function(e){return{type:Z(ae),payload:e}},ce=function(e){return{type:ee(ae),payload:{error:e}}},ie=function(e){return function(){var t=Object(_.a)(S.a.mark((function t(a,n){var r,s,o,l,c,i,m;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),(s=r.player.fetching)&&s.cancel(),o=r.OGSApi,t.prev=4,l=o.fetchUserId(e),a(me(l)),t.next=9,l;case 9:return c=t.sent,i=o.fetchUserDataById(c),a(me(i)),t.next=14,i;case 14:m=t.sent,a(ne(m.id)),a(ue({id:m.id,username:m.username,rank:parseInt(m.ranking),ratings:m.ratings,registrationDate:m.registration_date})),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.error(t.t0),"string"===typeof t.t0?a(pe(t.t0)):a(pe("An error has occured while fetching user info. Please try again later."));case 23:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e,a){return t.apply(this,arguments)}}()},me=function(e){return{type:K("FETCH_PLAYER"),payload:e}},ue=function(e){return{type:Z("FETCH_PLAYER"),payload:e}},pe=function(e){return{type:ee("FETCH_PLAYER"),payload:{error:e}}},he=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:""},e.updateSearchUser=function(t){e.setState({username:t.target.value})},e.submit=function(t){t.preventDefault(),e.state.username&&(e.props.history.push("/user/".concat(e.state.username)),e.props.getPlayerData(e.state.username),e.setState({username:""}),document.activeElement&&document.activeElement.blur())},e.downloadJSON=function(){var t=e.props.player,a=t.id,n=t.username,r=t.ratings,s=t.rank,o=t.registrationDate,l=e.props.games,c=l.start,i=l.end,m=l.results,u=JSON.stringify({exporterVersion:0,player:{id:a,username:n,ratings:r,rank:s,registrationDate:o},games:{start:c,end:i,results:m}}),p=new Blob([u],{type:"text/json;charset=utf-8"});Object(N.saveAs)(p,"gotstats_".concat(n,".json")),window.alert("Player data file exported.\nYou can use it for quick import in the future.")},e.readFile=function(t){var a=t.target.files[0],n=new FileReader;n.onload=function(t){e.readImportedJSON(t.target.result)},n.readAsText(a)},e.readImportedJSON=function(t){var a=JSON.parse(t);e.props.history.push("/user/".concat(a.player.username)),e.props.importPlayerData(a)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{value:this.state.username,onChange:this.updateSearchUser,name:"id",type:"text",placeholder:"Username or ID",className:"form-control"}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Got Stats?")))),r.a.createElement("p",{className:"text-center"},r.a.createElement("small",{className:"tip help-block"},r.a.createElement("em",null,"-- or --"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"d-flex justify-content-between"},r.a.createElement("input",{type:"file",onChange:this.readFile,id:"file_input",style:{display:"none"}}),r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return document.getElementById("file_input").click()}},"Import Data"),this.props.games.results.length>0&&r.a.createElement("button",{className:"btn btn-secondary",onClick:this.downloadJSON},"Export Data"))))}}]),a}(n.Component),de=Object(w.e)(Object(l.b)((function(e){return{player:e.player,games:e.games}}),(function(e){return{importPlayerData:function(t){return e(function(e){var t=e.player,a=e.games;return function(e,n){var r=n().player.fetching;r&&r.cancel(),e(ue(t)),e(ne(t.id,a.results))}}(t))},getPlayerData:function(t){return e(ie(t))}}}))(he)),fe=a(63),ge=a.n(fe),Ee=[["total_games_stats","Win/Loss ratio"],["game_results","Game results distribution"],["board_sizes_stats","Performance across board sizes"],["time_settings_stats","Performance across time settings"],["opponents_stats","Opponents statistics"],["misc_stats","Miscellaneous information"]],ve=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onLinkClicked=function(t,a){t.preventDefault(),e.props.scrollToElem(a)},e.renderLink=function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("a",{href:"#".concat(t[0]),onClick:function(a){return e.onLinkClicked(a,t[0])}},t[1]))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(ge.a,{className:"navi_list",items:Ee.map((function(e){return e[0]})),currentClassName:"active"},Ee.map(this.renderLink))}}]),a}(n.Component),ye=(a(95),function(e){var t=e.style,a=92*Math.PI;return r.a.createElement("svg",{width:100,height:100,viewBox:"0 0 ".concat(100," ").concat(100),transform:"rotate(-90)",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",shapeRendering:"optimizeQuality",style:t},r.a.createElement("circle",{r:46,cx:50,cy:50,fill:"black",className:"small_loading_icon_bg"}),r.a.createElement("circle",{r:46,cx:50,cy:50,fill:"transparent",strokeWidth:8,stroke:"white",strokeDasharray:a,className:"small_loading_icon_ring"}))}),be=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.fetching,a=e.errorMessage,n=e.currentPage,s=e.totalPages,o=e.showQuickLinks,l=e.freezeQuery,c=e.startDate,i=o?r.a.createElement("div",{className:"navi d-none d-md-block"},r.a.createElement("hr",null),r.a.createElement("small",{className:"tip help-block"},r.a.createElement("em",null,"*Mouse over/tap on a chart to see more info.")),r.a.createElement(ve,{scrollToElem:this.props.scrollToElem})):null,m=a||!(t&&s>0)?r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",{className:"mb-3 text-danger"},a),r.a.createElement(de,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(ye,{style:{width:32,height:32,marginRight:15,flex:"0 0 auto"}}),r.a.createElement("div",null,"Fetching games result from OGS - Page ",n+1,s&&" of ".concat(s))),c===R&&r.a.createElement("div",{className:"mt-3"},r.a.createElement("button",{className:"btn btn-block btn-secondary",onClick:l,title:"Set filter to current games (stop charts refreshing)"},"Freeze charts")));return r.a.createElement("div",{className:"col-lg-3 col-md-4 order-md-2 sidebar"},r.a.createElement("nav",{className:"side_nav sticky-top"},m,i,r.a.createElement("hr",null),r.a.createElement("a",{href:"https://forums.online-go.com/t/g0tstats-is-back-with-more-stats/6524",target:"_blank",rel:"noopener noreferrer nofollow"},"Support thread on OGS forum")))}}]),a}(n.Component),Oe={freezeQuery:function(){return function(e,t){var a=t().games.results;if(console.log("aaa"),0!==a.length){var n=a.length?new Date(a[a.length-1].ended):R;n.setHours(0,0,0,0),e(B({startDate:n}))}}}},ke=Object(l.b)((function(e){var t=e.chartsData,a=e.player,n=e.games;return{fetching:n.fetching,currentPage:n.fetchingPage,totalPages:n.fetchingTotalPage,errorMessage:a.fetchError||n.fetchError,showQuickLinks:t.results.length>0,startDate:t.startDate}}),Oe)(be),De=(a(96),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.errorMessage;return r.a.createElement("div",{className:"loading_wrapper"},r.a.createElement("svg",{className:"loading_icon animating",width:"150",height:"150"},r.a.createElement("circle",{className:"black_stone3",cx:"71.5",cy:"28.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone2",cx:"28.5",cy:"71.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone1",cx:"114.5",cy:"71.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"black_stone4",cx:"71.5",cy:"114.5",r:"19.5",strokeWidth:"0",fill:"#000000"}),r.a.createElement("circle",{className:"white_stone",cx:"71.5",cy:"71.5",r:"20",strokeWidth:"0",fill:"#f8f8ff"})),r.a.createElement("p",{className:"loading_text"},e||"Fetching user info from OGS..."))}}]),a}(n.Component)),xe=Object(l.b)((function(e){var t=e.player,a=e.games;return{isFetchingPlayer:t.fetching,currentPage:a.fetchingPage,totalPages:a.fetchingTotalPage,errorMessage:t.fetchError||a.fetchError}}))(De),we=a(8),Ne=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:60},colors:["#000000","#f8f8ff"],pieSliceTextStyle:{color:"#d93344"},legend:{position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},animation:{startup:!0,easing:"inout",duration:500}},subChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},animation:{startup:!0,easing:"inout",duration:500}}},e.computeWinLoseStatistics=function(e,t){var a,n=0,r=0,s=0,o=0,l=Object(P.a)(e);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.players.black.id===t?(n++,c.black_lost&&s++):(r++,c.white_lost&&o++)}}catch(i){l.e(i)}finally{l.f()}return{blackGames:n,blackLosses:s,whiteGames:r,whiteLosses:o}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.computeWinLoseStatistics(t,a.id),s=[["Color","Games"],["Black",n.blackGames],["White",n.whiteGames]],o=[["Result","Games"],["Losses",n.blackLosses+n.whiteLosses],["Wins",n.blackGames+n.whiteGames-(n.blackLosses+n.whiteLosses)]],l=n.blackGames>0?[["Result","Games"],["Losses",n.blackLosses],["Wins",n.blackGames-n.blackLosses]]:null,c=n.whiteGames>0?[["Result","Games"],["Losses",n.whiteLosses],["Wins",n.whiteGames-n.whiteLosses]]:null;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},s?r.a.createElement("div",{className:"col-sm-6 mr-auto ml-auto"},r.a.createElement(we.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:s,width:"100%",height:"400px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},o?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Total"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.subChartOptions,data:o,width:"100%",height:"250px"})):null,l?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"As Black"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.subChartOptions,data:l,width:"100%",height:"250px"})):null,c?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"As White"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.subChartOptions,data:c,width:"100%",height:"250px"})):null),this.props.footer)}}]),a}(n.Component),Ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10,left:0,right:0},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},columnChartOptions:{backgroundColor:"transparent",isStacked:!0,chartArea:{top:10},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},hAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}},vAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}}}},e.assignGameResultToDistributions=function(e,t){var a=v(t,e.id);if("Resignation"===t.outcome)e["".concat(a?"Plr":"Opp","+Res")]++;else if("Timeout"===t.outcome)e["".concat(a?"Plr":"Opp","+Time")]++;else if(isNaN(t.outcome.split(" ")[0]))e["".concat(a?"Plr":"Opp","+Other")]++;else{var n=parseFloat(t.outcome.split(" ")[0],10),r=Math.floor(n/10),s=10*(r<4?r:4)+"+";s="".concat(a?"Plr":"Opp","+").concat(s),e["".concat(a?"Plr":"Opp","+Count")]++,e[s]++}return e},e.computeWinLoseDistributions=function(t,a){var n={id:a,"Opp+Other":0,"Opp+Count":0,"Opp+Time":0,"Opp+Res":0,"Opp+40+":0,"Opp+30+":0,"Opp+20+":0,"Opp+10+":0,"Opp+0+":0,"Plr+0+":0,"Plr+10+":0,"Plr+20+":0,"Plr+30+":0,"Plr+40+":0,"Plr+Res":0,"Plr+Time":0,"Plr+Count":0,"Plr+Other":0};return t.reduce(e.assignGameResultToDistributions,n)},e}return Object(i.a)(a,[{key:"generateChartData",value:function(e,t){var a=this.computeWinLoseDistributions(e,t);return{chartData1:[["Result","Games"],["Timeout",a["Plr+Time"]],["Resign",a["Plr+Res"]],["Scoring",a["Plr+Count"]],["Other",a["Plr+Other"]]],chartData2:[["Result","Games"],["Timeout",a["Opp+Time"]],["Resign",a["Opp+Res"]],["Scoring",a["Opp+Count"]],["Other",a["Opp+Other"]]],chartData3:[["Outcome","Losses","Wins"],["40+",a["Opp+40+"],null],["30+",a["Opp+30+"],null],["20+",a["Opp+20+"],null],["10+",a["Opp+10+"],null],["0+",a["Opp+0+"],null],["0+",null,a["Plr+0+"]],["10+",null,a["Plr+10+"]],["20+",null,a["Plr+20+"]],["30+",null,a["Plr+30+"]],["40+",null,a["Plr+40+"]]]}}},{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.generateChartData(t,a.id),s=n.chartData1,o=n.chartData2,l=n.chartData3;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},o?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Losses"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:o,width:"100%",height:"300px"})):null,s?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Wins"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:s,width:"100%",height:"300px"})):null),r.a.createElement("div",{className:"row"},l?r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"Final scoring distribution"),r.a.createElement(we.a,{chartType:"ColumnChart",options:this.state.columnChartOptions,data:l,width:"100%",height:"300px"})):null))}}]),a}(n.Component),Se=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:60,left:0,right:0},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",alignment:"center",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}}},e.computeBoardSizes=function(e,t){var a=0,n=0,r=0,s=0,o=0,l=0,c=0,i=0;return e.forEach((function(e){19===e.width&&19===e.height?(a++,v(e,t)||o++):13===e.width&&13===e.height?(n++,v(e,t)||l++):9===e.width&&9===e.height?(r++,v(e,t)||c++):(s++,v(e,t)||i++)})),{nineteenGames:a,thirteenGames:n,nineGames:r,otherGames:s,nineteenLosses:o,thirteenLosses:l,nineLosses:c,otherLosses:i}},e.generateChartData=function(t,a){var n=e.computeBoardSizes(t,a),r=n.nineteenGames,s=n.thirteenGames,o=n.nineGames,l=n.otherGames,c=n.nineteenLosses,i=n.thirteenLosses,m=n.nineLosses,u=n.otherLosses;return{chartData1:[["Size","Games"],["19x19",r],["13x13",s],["9x9",o],["Other",l]],chartData2:r>0?[["Result","Games"],["Losses",c],["Wins",r-c]]:null,chartData3:s>0?[["Result","Games"],["Losses",i],["Wins",s-i]]:null,chartData4:o>0?[["Result","Games"],["Losses",m],["Wins",o-m]]:null,chartData5:l>0?[["Result","Games"],["Losses",u],["Wins",l-u]]:null}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.generateChartData(t,a.id),s=n.chartData1,o=n.chartData2,l=n.chartData3,c=n.chartData4,i=n.chartData5;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},s?r.a.createElement("div",{className:"col-md-6 mr-auto ml-auto"},r.a.createElement(we.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:s,width:"100%",height:"400px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},o?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"19x19"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:o,width:"100%",height:"250px"})):null,l?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"13x13"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:l,width:"100%",height:"250px"})):null,c?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"9x9"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:c,width:"100%",height:"250px"})):null,i?r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h5",{className:"text-center"},"Other Sizes"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:i,width:"100%",height:"250px"})):null))}}]),a}(n.Component),_e=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={mainChartOptions:{backgroundColor:"transparent",chartArea:{top:60,left:0,right:0},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}},pieChartOptions:{backgroundColor:"transparent",chartArea:{top:10},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],pieSliceTextStyle:{color:"#ffffff"},legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}}}},e.computeTimeSettings=function(e,t){var a=0,n=0,r=0,s=0,o=0,l=0;return e.forEach((function(e){e.time_per_move<20?(a++,v(e,t)||s++):e.time_per_move>10800?(r++,v(e,t)||l++):(n++,v(e,t)||o++)})),{blitzGames:a,liveGames:n,correspondenceGames:r,blitzLosses:s,liveLosses:o,correspondenceLosses:l}},e}return Object(i.a)(a,[{key:"generateChartData",value:function(e,t){var a=this.computeTimeSettings(e,t);return{chartData1:[["Size","Games"],["Blitz",a.blitzGames],["Live",a.liveGames],["Correspondence",a.correspondenceGames]],chartData2:a.blitzGames>0?[["Result","Games"],["Losses",a.blitzLosses],["Wins",a.blitzGames-a.blitzLosses]]:null,chartData3:a.liveGames>0?[["Result","Games"],["Losses",a.liveLosses],["Wins",a.liveGames-a.liveLosses]]:null,chartData4:a.correspondenceGames>0?[["Result","Games"],["Losses",a.correspondenceLosses],["Wins",a.correspondenceGames-a.correspondenceLosses]]:null}}},{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.generateChartData(t,a.id),s=n.chartData1,o=n.chartData2,l=n.chartData3,c=n.chartData4;return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("div",{className:"row"},s?r.a.createElement("div",{className:"col-sm-6 mr-auto ml-auto"},r.a.createElement(we.a,{chartType:"PieChart",options:this.state.mainChartOptions,data:s,width:"100%",height:"400px"})):null),r.a.createElement("h3",{className:"text-center"},"Win/Loss ratio"),r.a.createElement("div",{className:"row"},o?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Blitz"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:o,width:"100%",height:"250px"})):null,l?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Live"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:l,width:"100%",height:"250px"})):null,c?r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h5",{className:"text-center"},"Correspondence"),r.a.createElement(we.a,{chartType:"PieChart",options:this.state.pieChartOptions,data:c,width:"100%",height:"250px"})):null))}}]),a}(n.Component),je=a(11),Pe=function(e){var t=e.href,a=e.title,n=e.children;return r.a.createElement("a",{href:t,title:a||n,target:"_blank",rel:"noopener noreferrer nofollow"},n)},Te=function(e){var t=e.player,a="".concat(je.OGS_ROOT,"user/view/").concat(t.id,"/").concat(t.username),n="".concat(je.OGS_API_ROOT).concat(t.id,"/icon?size=32"),s="".concat(t.username," (").concat(g(t),")");return r.a.createElement(Pe,{href:a,title:s},r.a.createElement("img",{className:"img-20",src:n,alt:s})," ",s)},Re=a(17),Ge=a.n(Re),Le=function(e){var t=e.game;return r.a.createElement(Pe,{href:"".concat(je.OGS_ROOT,"game/").concat(t.related.detail.split("games/")[1])},Ge()(t.ended).format("MMM D, YYYY"))},Ae=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).computeOpponentsInfo=function(e,t){var a,n,r={},s={rank:70},o={rank:0},l={games:0},c={ratingDiff:-9999},i=Object(P.a)(e);try{for(i.s();!(n=i.n()).done;){var m=n.value,u=v(m,t.id),p=y(m,t.id).opponent,h=b(m,t.id),g=h.historicalOpponent,E=h.historicalPlayer,O=d(p);if(u){var k=f(p)-f(t)+f(g)-f(E);k>c.ratingDiff&&(c=Object(T.a)(Object(T.a)({},p),{},{ratingDiff:k,game:m}))}r[p.id]?(r[p.id].games++,u?r[p.id].win++:r[p.id].loss++):r[p.id]={opponent:p,rank:O,games:1,win:u?1:0,loss:u?0:1},O>o.rank&&(o=Object(T.a)(Object(T.a)({},p),{},{rank:O})),O<s.rank&&(s=Object(T.a)(Object(T.a)({},p),{},{rank:O}))}}catch(N){i.e(N)}finally{i.f()}var D=Object.values(r).sort((function(e,t){return t.games-e.games}));if(D.length>0){var x=D[0];l=Object(T.a)(Object(T.a)({},x.opponent),{},{games:x.games})}var w=D.filter((function(e){return e.games>2}));return{strongestOpp:o,weakestOpp:s,mostPlayed:l,strongestDefeated:c,numberOfOpponents:a=Object.keys(r).length,recurringOpponents:w,averageGamePerOpponent:(e.length/a).toFixed(2)}},e}return Object(i.a)(a,[{key:"generateChartData",value:function(e,t){var a=this.computeOpponentsInfo(e,t),n=Math.max(a.weakestOpp.rank,0)-5,r=Math.min(a.strongestOpp.rank,42)-5,s=d(this.props.player)-5;return{numberOfOpponents:a.numberOfOpponents,weakestDisp:{href:"".concat(je.OGS_ROOT,"user/view/").concat(a.weakestOpp.id,"/").concat(a.weakestOpp.username),title:"".concat(a.weakestOpp.username," (").concat(g(a.weakestOpp),")"),style:{left:"".concat(3.03030303*n,"%")},img:"".concat(je.OGS_API_ROOT).concat(a.weakestOpp.id,"/icon?size=32")},userDisp:{href:"".concat(je.OGS_ROOT,"user/view/").concat(this.props.player.id,"/").concat(this.props.player.username),title:"".concat(this.props.player.username," (").concat(g(this.props.player),")"),style:{left:"".concat(3.03030303*s,"%")},img:"".concat(je.OGS_API_ROOT).concat(this.props.player.id,"/icon?size=32")},strongestDisp:{href:"".concat(je.OGS_ROOT,"user/view/").concat(a.strongestOpp.id,"/").concat(a.strongestOpp.username),title:"".concat(a.strongestOpp.username," (").concat(g(a.strongestOpp),")"),style:{left:"".concat(3.03030303*r,"%")},img:"".concat(je.OGS_API_ROOT).concat(a.strongestOpp.id,"/icon?size=32")},mostPlayedDisp:a.mostPlayed,strongestDefeatedDisp:a.strongestDefeated,averageGamePerOpponent:a.averageGamePerOpponent,recurringOpponents:a.recurringOpponents}}},{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.generateChartData(t,a),s=n.numberOfOpponents,o=n.weakestDisp,l=n.userDisp,c=n.strongestDisp,i=n.mostPlayedDisp,m=n.strongestDefeatedDisp,u=n.averageGamePerOpponent,p=n.recurringOpponents;return s?r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title,": ",s),r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"opponents_polars_chart",className:"opponent_chart col-8 mr-auto ml-auto"},r.a.createElement("ul",{className:"bar_legend"},r.a.createElement("li",{style:o.style},r.a.createElement("div",null,"Weakest Opponent"),r.a.createElement("span",null)),r.a.createElement("li",{style:c.style},r.a.createElement("div",null,"Strongest Opponent"),r.a.createElement("span",null))),r.a.createElement("div",{className:"bar_chart"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o.href,"data-toggle":"tooltip","data-placement":"top",title:o.title,style:o.style},r.a.createElement("img",{src:o.img,alt:o.title})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l.href,"data-toggle":"tooltip","data-placement":"top",title:l.title,style:l.style},r.a.createElement("img",{src:l.img,alt:l.title})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c.href,"data-toggle":"tooltip","data-placement":"top",title:c.title,style:c.style},r.a.createElement("img",{src:c.img,alt:c.title}))),r.a.createElement("ul",{className:"ruler"},r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"25k")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"10k")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"1d")))),r.a.createElement("li",null,r.a.createElement("span",null),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("em",null,"9d"))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"info_list"},r.a.createElement("li",null,"Most played with: ",r.a.createElement(Te,{player:i})," in"," ",i.games," games."),!!m.username&&r.a.createElement("li",null,"Strongest defeated opponent:"," ",r.a.createElement(Te,{player:m})," on"," ",r.a.createElement(Le,{game:m.game}),"."),r.a.createElement("li",null,"Average game per opponent: ",u," games."),p.length>0&&r.a.createElement("li",null,"Regulars:",r.a.createElement("div",{className:"recurring-opponent-list mt-2"},r.a.createElement("div",{className:"px-3 py-2"},r.a.createElement("strong",null,"Games")),r.a.createElement("div",{className:"px-3 py-2"},r.a.createElement("strong",null,"Win Rate")),r.a.createElement("div",{className:"px-3 py-2"},r.a.createElement("strong",null,"Opponent")),r.a.createElement("div",{className:"px-3 py-2"},r.a.createElement("strong",null,"Wins")),r.a.createElement("div",{className:"px-3 py-2"},r.a.createElement("strong",null,"Losses")),p.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"px-3 py-2",key:e.opponent.id+"games",style:{background:t%2===0?"rgba(0,0,0,0.3)":"transparent"}},e.games),r.a.createElement("div",{className:"px-3 py-2 text-right",key:e.opponent.id+"winrate",style:{background:t%2===0?"rgba(0,0,0,0.3)":"transparent"}},(100*e.win/(e.win+e.loss)).toFixed(2),"%"),r.a.createElement("div",{className:"px-3 py-2",key:e.opponent.id+"name",style:{background:t%2===0?"rgba(0,0,0,0.3)":"transparent"}},r.a.createElement(Te,{player:e.opponent})),r.a.createElement("div",{className:"px-3 py-2",key:e.opponent.id+"wins",style:{background:t%2===0?"rgba(0,0,0,0.3)":"transparent"}},e.win),r.a.createElement("div",{className:"px-3 py-2",key:e.opponent.id+"losess",style:{background:t%2===0?"rgba(0,0,0,0.3)":"transparent"}},e.loss))})))))))):r.a.createElement("section",{className:"stats_block"})}}]),a}(n.Component),ze=(a(98),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={columnChartOptions:{backgroundColor:"transparent",isStacked:!0,chartArea:{top:10},colors:["#d93344","#CEEC97","#6369D1","#D8D2E1"],legend:{maxLines:2,position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},hAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}},vAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11}}}},e.computeMiscInfo=function(e,t){var a,n=new Date;n.setHours(0,0,0,0);var r,s=0,o={streak:0},l={streak:0},c=0,i=0,m={diff:0},u={game:null,duration:0},p=Object(P.a)(e);try{for(p.s();!(r=p.n()).done;){var h=r.value,d=v(h,t.id);if(d?(l.streak++,l.start=h,l.end||(l.end=h),l.streak>o.streak&&(o=l)):l={streak:0},d){var f=y(h,t.id).opponent;if(!isNaN(h.outcome.split(" ")[0])){var g=parseFloat(h.outcome.split(" ")[0]);g>m.diff&&(m={game:h,opponent:f,diff:g})}}else s++;var E=new Date(h.ended);if(E.setHours(0,0,0,0),0!==O(n,E)?(n=E,i=1):i++,i>c&&(a=n,c=i),h.ended&&h.started){var b=Ge.a.duration(Ge()(h.ended).diff(Ge()(h.started))).asMilliseconds();b>u.duration&&(u={game:h,duration:b})}}}catch(C){p.e(C)}finally{p.f()}var k=new Date(t.registrationDate);if(e.length){var D=new Date(e[e.length-1].started);D<k&&(k=D)}var x=0;if(e.length){var w=new Date(e[e.length-1].started),N=O(new Date,w);x=e.length/parseFloat(N)}return{memberSince:k,gamesPerDay:x,longestStreak:o,mostActiveDay:a,gamesOnMostActiveDay:c,biggestWin:m,uniqueTournaments:e.filter((function(e){return null!==e.tournament})).reduce((function(e,t){return-1===e.indexOf(t.tournament)&&e.push(t.tournament),e}),[]).length,totalLosses:s,longestGame:u.game}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.games,a=e.player,n=this.computeMiscInfo(t,a),s=n.memberSince,o=n.gamesPerDay,l=n.longestStreak,c=n.mostActiveDay,i=n.gamesOnMostActiveDay,m=n.biggestWin,u=n.totalLosses,p=n.uniqueTournaments,h=n.longestGame,d=l.end?r.a.createElement("span",null,", from ",r.a.createElement(Le,{game:l.start})," to"," ",r.a.createElement(Le,{game:l.end})):"",f=m.game&&r.a.createElement("li",null,"Biggest win: ",m.diff," points victory against"," ",r.a.createElement(Te,{player:m.opponent})," on"," ",r.a.createElement(Le,{game:m.game}),".");return r.a.createElement("section",{className:"stats_block"},r.a.createElement("h2",{id:this.props.id,className:"text-center"},this.props.title),r.a.createElement("ul",{className:"info_list"},r.a.createElement("li",null,"Member since: ",Ge()(s).format("DD MMM, YYYY"),"."),r.a.createElement("li",null,"Plays ",o.toFixed(3)," games per day on average."),r.a.createElement("li",null,"Most active day: ",Ge()(c).format("DD MMM, YYYY")," with"," ",i," finished games."),r.a.createElement("li",null,"Played in ",p," tournaments."),r.a.createElement("li",null,"Longest win streak: ",l.streak," wins in a row",d,"."),f,h&&r.a.createElement("li",null,"Longest game: ",r.a.createElement(Le,{game:h})," lasting"," ",Ge.a.preciseDiff(h.ended,h.started)),u>=50&&r.a.createElement("li",null,"Congratulations,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer nofollow",href:"http://senseis.xmp.net/?page=LoseYourFirst50GamesAsQuicklyAsPossible"},"you have lost your first 50 games"),"!")))}}]),a}(n.Component)),Me=a(23),Ie=a(42),We=a.n(Ie),Fe=(a(100),a(126)),Be=a(127),Ye=new Date("Jan 1 2008").getTime(),He=new Date,Ue=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={expanded:!1},e.onCheckboxChanged=function(t){var a=t.target.name,n=Array.from(document.querySelectorAll("input[name='".concat(a,"']"))).filter((function(e){return e.checked})).map((function(e){return e.value}));e.onFilterChanged(Object(Me.a)({},a,n))},e.onToggleChanged=function(t){var a=t.target.name,n=t.target.checked;e.onFilterChanged(Object(Me.a)({},a,n))},e.onDateChanged=function(t,a){var n=a[0];e.onFilterChanged(Object(Me.a)({},t,n))},e.onFilterChanged=function(t){var a=e.props,n=a.ranked,r=a.tournament,s=a.boardSize,o=a.timeSettings,l=a.handicap,c=a.color,i=a.startDate,m=a.endDate,u=a.resultType;e.props.filterGames(Object(T.a)({ranked:n,tournament:r,boardSize:s,timeSettings:o,handicap:l,color:c,resultType:u,endDate:m,startDate:i},t))},e.renderCheckBoxItems=function(t,a,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s?r.a.createElement("div",{className:"form-group col-sm-6 col-lg-4"},r.a.createElement("div",{className:"row"},t.map((function(t,s){return r.a.createElement("div",{className:"col-5",key:s},e.renderCheckbox(a,n,t,s))})))):r.a.createElement("div",{className:"form-group col-sm-6 col-lg-4"},t.map((function(t,r){return e.renderCheckbox(a,n,t,r)})))},e.renderCheckbox=function(t,a,n,s){return r.a.createElement("div",{className:"form-check",key:s},r.a.createElement("input",{name:a,className:"form-check-input",type:"checkbox",id:"".concat(a,"_").concat(s),value:n,defaultChecked:t.includes(n),onChange:e.onCheckboxChanged}),r.a.createElement("label",{className:"form-check-label",htmlFor:"".concat(a,"_").concat(s)},n))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.ranked,n=t.tournament,s=t.boardSize,o=t.timeSettings,l=t.handicap,c=t.color,i=t.resultType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{color:"secondary",className:"mb-3",onClick:function(){return e.setState({expanded:!e.state.expanded})}},"Filters ",this.state.expanded?"-":"+"),r.a.createElement(Be.a,{isOpen:this.state.expanded},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-sm-6 col-lg-4"},r.a.createElement("label",null,"Analyze games starting from"),r.a.createElement(We.a,{value:this.props.startDate||"",className:"form-control flatpickr-input",name:"startDate",onChange:function(t){return e.onDateChanged("startDate",t)},options:{dateFormat:"M d, Y",minDate:this.props.minDate,maxDate:this.props.maxDate,enableTime:!1,enableSeconds:!1}})),r.a.createElement("div",{className:"form-group col-sm-6 col-lg-4"},r.a.createElement("label",{className:"form-check"},r.a.createElement("input",{name:"limitEndDate",className:"form-check-input",type:"checkbox",id:"limit_endDate",value:"limitEndDate",defaultChecked:this.props.limitEndDate,onChange:this.onToggleChanged}),r.a.createElement("label",{className:"form-check-label",htmlFor:"limit_endDate"},"limit end date".concat(this.props.limitEndDate?" to":""))),this.props.limitEndDate&&r.a.createElement(We.a,{value:this.props.endDate||"",className:"form-control flatpickr-input",name:"endDate",onChange:function(t){return e.onDateChanged("endDate",t)},options:{dateFormat:"M d, Y",minDate:this.props.minDate,maxDate:this.props.maxDate,enableTime:!1,enableSeconds:!1}})))),this.renderCheckBoxItems(L.values,a,"ranked"),this.renderCheckBoxItems(z.values,s,"boardSize",!0),this.renderCheckBoxItems(M.values,o,"timeSettings"),this.renderCheckBoxItems(F.values,l,"handicap"),this.renderCheckBoxItems(W.values,c,"color"),this.renderCheckBoxItems(I.values,i,"resultType"),this.renderCheckBoxItems(A.values,n,"tournament"))))}}]),a}(n.PureComponent),Je=Object(l.b)((function(e){var t=e.chartsData,a=e.games;return Object(T.a)(Object(T.a)({},t),{},{minDate:a.start||Ye,maxDate:a.end||He})}),(function(e){return{filterGames:function(t){return e(B(t))}}}))(Ue),Ve=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={scatterPlotChartOptions:{backgroundColor:"transparent",chartArea:{top:50,left:50,right:5},colors:["#6369D1","#d93344","#CEEC97","#D8D2E1"],legend:{position:"bottom",textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:14}},series:[{type:"line"},{type:"scatter",pointShape:{type:"triangle",rotation:180}},{type:"scatter",pointShape:{type:"triangle"}}],hAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11},gridlines:{color:"transparent"},format:"MMM ''yy"},vAxis:{textStyle:{color:"#f8f8ff",fontName:"Roboto",fontSize:11},gridlines:{count:0}},tooltip:{isHtml:!0,trigger:"selection"}}},e.computeGameHistory=function(e,t,a){var n=[];(a||e.length<2)&&n.push({date:new Date,playerRating:f(t)});var r,s=Object(P.a)(e);try{for(s.s();!(r=s.n()).done;){var o=r.value,l=v(o,t.id),c=b(o,t.id),i=c.historicalPlayer,m=c.historicalOpponent;n.push({isBlack:o.players.black.id===t.id,isWin:l,date:new Date(o.ended),playerRating:f(i),opponentRating:f(m),gameId:o.id})}}catch(u){s.e(u)}finally{s.f()}return n},e.renderChartTooltip=function(e){var t=e.isBlack,a=e.isWin,n=e.date,r=e.playerRating,s=e.opponentRating,o=e.gameId;return s?'<h6><a class="'.concat(a?"text-green":"text-red",'" href="').concat(je.OGS_ROOT,"game/").concat(o,'" target="blank" rel="noopener noreferrer nofollow">').concat(Ge()(n).format("MMM D, YYYY HH:mm")," - ").concat(a?"Win":"Loss",'</a></h6>\n      <div><i class="fas fa-circle" style="').concat(t?"color: #000000;":"color: #ffffff;",'"></i> Player rating: ').concat(Math.round(r)," (").concat(E(r),')</div>\n      <div><i class="fas fa-circle" style="').concat(t?"color: #ffffff;":"color: #000000;",'"></i> Opponent rating: ').concat(Math.round(s)," (").concat(E(s),")</div>"):"<h6>Currently</h6>\n      <div>Player rating: ".concat(Math.round(r)," (").concat(E(r),")</div>")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.games,n=t.player,s=t.insertCurrentRank,o=this.computeGameHistory(a,n,s),l=[["Date",{type:"number",label:"Player Rating"},{type:"string",role:"tooltip",p:{html:!0}},{type:"number",label:"Opponent Rating (Loss)"},{type:"string",role:"tooltip",p:{html:!0}},{type:"number",label:"Opponent Rating (Win)"},{type:"string",role:"tooltip",p:{html:!0}}]].concat(Object(j.a)(o.map((function(t){return[t.date,t.playerRating,e.renderChartTooltip(t),t.isWin?null:t.opponentRating,e.renderChartTooltip(t),t.isWin?t.opponentRating:null,e.renderChartTooltip(t)]}))));return r.a.createElement(we.b,{chartType:"ComboChart",data:l,options:this.state.scatterPlotChartOptions,width:"100%",height:"400px"})}}]),a}(n.Component),qe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.chartsData,n=e.games,s=a.results,o=n.results;return r.a.createElement("div",null,r.a.createElement(Je,null),r.a.createElement("hr",null),r.a.createElement("h2",{id:"total_games_stats",className:"text-center"},"".concat(s.length," of ").concat(o.length," games match the filters")),s.length>0&&r.a.createElement("div",null,r.a.createElement(Ve,{games:s,player:t,insertCurrentRank:!a.limitEndDate}),r.a.createElement(Ne,{games:s,player:t}),r.a.createElement(Ce,{title:"Game results distribution",id:"game_results",games:s,player:t}),a.boardSize.length>1&&r.a.createElement(Se,{title:"Performance across board sizes",id:"board_sizes_stats",games:s,player:t}),a.timeSettings.length>1&&r.a.createElement(_e,{title:"Performance across time settings",id:"time_settings_stats",games:s,player:t}),r.a.createElement(Ae,{title:"Unique opponents faced",id:"opponents_stats",games:s,player:t}),r.a.createElement(ze,{title:"Miscellaneous",id:"misc_stats",games:s,player:t})))}}]),a}(n.Component),Qe=Object(l.b)((function(e){return{chartsData:e.chartsData,games:e.games,player:e.player}}))(qe),Xe=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("p",null,r.a.createElement("em",null,'"Got Stats?" analytics tool for ',r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer nofollow",href:"https://www.online-go.com"},"OGS")," by Chinitsu (aka AVAVT).")),r.a.createElement("p",null,r.a.createElement("em",null,"The source code is also available on ",r.a.createElement("a",{href:"https://github.com/AVAVT/gotstats",target:"_blank",rel:"noopener noreferrer nofollow"},"Github"),"."))),r.a.createElement("div",{className:"col-sm-4 text-right"},r.a.createElement("a",{href:"http://avavt.github.io",target:"_blank",rel:"noopener noreferrer"},"About the author")))))},$e=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"scrollToElem",value:function(e){document.getElementById(e).scrollIntoView()}},{key:"componentDidMount",value:function(){this.props.user&&this.props.getPlayerData(this.props.user)}},{key:"render",value:function(){return r.a.createElement("main",{className:"App"},r.a.createElement(D,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(ke,{scrollToElem:this.scrollToElem}),r.a.createElement("div",{className:"col-lg-9 order-md-1 col-md-8 content-wrapper"},this.props.showStatistics?r.a.createElement(Qe,null):this.props.showLoading?r.a.createElement(xe,null):r.a.createElement(x,null)))),r.a.createElement(Xe,null))}}]),a}(n.Component),Ke=Object(l.b)((function(e){var t=e.player,a=e.games;return{player:t,showLoading:!!t.fetching||!!t.fetchError||!!a.fetching||!!a.fetchError,showStatistics:t.id>-1&&a.results.length>0}}),(function(e){return{getPlayerData:function(t){return e(ie(t))}}}))($e),Ze=a(38),et=function(e){var t=e.reduxStore;return r.a.createElement(l.a,{store:t},r.a.createElement(Ze.a,null,r.a.createElement(w.a,{path:"/user/:user",component:function(e){var t=e.match;return r.a.createElement(Ke,{user:t.params.user})}}),r.a.createElement(w.a,{exact:!0,path:"/",component:Ke})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=a(65),at=a(66),nt=a(20),rt={id:-1,username:"",ratings:{overall:{rating:0}},rank:0,fetching:null,fetchError:"",registrationDate:null},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case K("FETCH_PLAYER"):return Object(T.a)(Object(T.a)({},rt),{},{fetching:n,fetchError:""});case Z("FETCH_PLAYER"):return Object(T.a)(Object(T.a)({},e),{},{fetching:null},n);case ee("FETCH_PLAYER"):return Object(T.a)(Object(T.a)({},e),{},{fetching:null,fetchError:n.error});default:return e}},ot={results:[],fetching:null,fetchingPage:0,fetchingTotalPage:0,fetchError:"",start:R,end:G},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case K("FETCH_PLAYER"):return Object(T.a)(Object(T.a)({},ot),{},{fetching:e.fetching});case K(ae):return Object(T.a)(Object(T.a)({},e),{},{fetching:n,fetchingPage:0,fetchingTotalPage:0,fetchError:"",results:[],start:R,end:G});case te(ae):return Object(T.a)(Object(T.a)({},e),n);case Z(ae):return Object(T.a)(Object(T.a)({},e),{},{fetching:null},n);case ee(ae):return Object(T.a)(Object(T.a)({},e),{},{fetching:null,fetchError:n.error});default:return e}},ct={startDate:R,endDate:G,ranked:L.values,tournament:A.values,boardSize:z.values,timeSettings:M.values,handicap:F.values,color:W.values,resultType:I.values,limitEndDate:!1,results:[]},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"UPDATE_CHART_DATA_SOURCE":return Object(T.a)(Object(T.a)({},e),n);case K(ae):case K("FETCH_PLAYER"):return Object(T.a)({},ct);case Z(ae):return Object(T.a)(Object(T.a)({},e),{},{startDate:n.start});default:return e}},mt=a(35),ut=a.n(mt),pt=a(36),ht=a.n(pt),dt={fetchUserId:function(e){return new ht.a((function(t,a){isNaN(e)?ut.a.get("".concat(je.OGS_API_ROOT,"?username=").concat(e)).then((function(e){return e.data})).then((function(e){e.results.length>0?t(e.results[0].id):a("Error: user not found. Are you sure you entered the correct username? If it still doesn't work, try using userID instead.")})).catch((function(e){a("Error connecting to OGS server. Error code: ".concat(e.status,". Please try again later or contact me if you really have the need to stalk that person."))})):t(e)}))},fetchUserDataById:function(e){return new ht.a((function(t,a){ut.a.get("".concat(je.OGS_API_ROOT).concat(e)).then((function(e){return e.data})).then((function(e){t(e)})).catch((function(e){a("Error connecting to OGS server. Error code: ".concat(e.status,". Please try again later or contact me if you really have the need to stalk that person."))}))}))},fetchGamePage:function(e,t){return void 0===t&&(t="".concat(je.OGS_API_ROOT).concat(e,"/games/?ended__isnull=false&annulled=false&ordering=-ended&page_size=50")),new ht.a((function(e,a){ut.a.get(t).then((function(e){return e.data})).then((function(t){e(t)})).catch((function(e){a(e)}))}))}},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"OVERRIDE_API"===a?n:e},gt=Object(nt.combineReducers)({OGSApi:ft,player:st,games:lt,chartsData:it}),Et=Object(nt.createStore)(gt,Object(tt.composeWithDevTools)(Object(nt.applyMiddleware)(at.a)));o.a.render(r.a.createElement(et,{reduxStore:Et}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,t,a){e.exports=a(124)},73:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.fab7c5ee.chunk.js.map